# ë³µêµ¬í•˜ê¸° - reflog
- ì‘ì—…í•˜ë‹¤ê°€ `git reset --hard`ë¡œ ì»¤ë°‹ ì§€ì› ëŠ”ë° ì§€ìš°ë©´ ì•ˆ ë˜ëŠ” ì»¤ë°‹ê¹Œì§€ ì§€ì›Œë²„ë ¸ë‹¤.
- [commit ë˜ëŒë¦¬ê¸°](https://github.com/yj-oh/til/blob/master/git/%5B20200729%5D_commit_%EB%90%98%EB%8F%8C%EB%A6%AC%EA%B8%B0.md)
    - `reset --hard`ë¥¼ ì •ë¦¬í•˜ë©´ì„œ `âš ï¸ì£¼ì˜! ì‚­ì œ í›„ ë³µì›í•  ìˆ˜ ì—†ìŒ.`ì´ë¼ê³  í–ˆì—ˆëŠ”ë° ì‚¬ì‹¤ ëœë‹¤.
    - `reflog` ì…ì¥í•˜ì„¸ìš”.
- git ê³µë¶€ëŠ” ë¬´ì¡°ê±´ ìƒí™© ë§Œë“¤ì–´ì„œ ì´ë ‡ê²Œ ì €ë ‡ê²Œ ì£¼ë¬¼ì£¼ë¬¼ ì§ì ‘ ëª…ë ¹ì–´ ë‚ ë ¤ë³´ë©° í•˜ëŠ” ê²Œ ì œì¼ ì¢‹ë‹¤.

---

# ğŸ‘‰ ìƒí™© êµ¬ì„±
![git log](.%5B20210124%5D_reflog_images/f9e33afb.png)

- `page5`, `page4` ì»¤ë°‹ì„ ì§€ìš°ê¸° ìœ„í•´ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ë‚ ë ¤ì•¼ í•˜ëŠ”ë°
```git
git reset --hard HEAD^^
```
- ì‹¤ìˆ˜ë¡œ `git reset --hard HEAD^^^` ì´ë ‡ê²Œ ë‚ ë ¤ì„œ `page3`ê¹Œì§€ ì§€ì›Œì ¸ë²„ë ¸ë‹¤.

![git log](.%5B20210124%5D_reflog_images/fd70264d.png)


# ğŸ‘‰ git reflogì˜ ë“±ì¥
```text
Reference logs, or "reflogs", record when the tips of branches and 
other references were updated in the local repository. 
```
- ì§„ì§œ ê·¸ëŸ°ì§€ ëª…ë ¹ì–´ë¥¼ ë‚ ë ¤ ê¸°ë¡ì„ í™•ì¸í•´ë³´ì.
```git
git reflog
```
![git reflog](.%5B20210124%5D_reflog_images/5cb21737.png)
- `HEAD@{0}`ì„ ë³´ë©´ `reset: moving to HEAD^^^`ê°€ ìˆë‹¤.
- ìœ„ì—ì„œ reset í–ˆë˜ ê¸°ë¡ì„ gitì´ ê°€ì§€ê³  ìˆëŠ” ê²ƒ.
- (ì•ì˜ í•´ì‹œê°’ì€ ì²˜ìŒì— reflogê°€ ë”°ë¡œ ê°€ì§€ê³  ìˆëŠ” ê°’ì¸ê°€ í–ˆëŠ”ë°, ê·¸ê²Œ ì•„ë‹ˆê³  logì˜ í•´ì‹œê°’ì´ë‹¤.)
- `page5`ê¹Œì§€ì˜ ê¸°ë¡ì´ ìˆëŠ” `1f1b89f`ë¡œ ëŒì•„ê°€ì•¼ í•œë‹¤.

```git
git checkout 1f1b89f
```
![git log](.%5B20210124%5D_reflog_images/b2073936.png)
- HEADê°€ 1f1b89fë¡œ ê°”ë‹¤.

## â“ `master`ë¥¼ ì–´ë–»ê²Œ HEAD ìœ„ì¹˜ë¡œ ì˜®ê¸¸ê¹Œ?
- ë‘ ê°€ì§€ ë°©ë²•ì„ ì†Œê°œí•œë‹¤.
> - [ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•](#-ë¸Œëœì¹˜ë¥¼-ìƒì„±í•˜ëŠ”-ë°©ë²•)
> - [update-refë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•](#-update-refë¥¼-ì´ìš©í•˜ëŠ”-ë°©ë²•)
    
## â˜ï¸ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•
- ë¸Œëœì¹˜ë¥¼ í•˜ë‚˜ ìƒì„±í•˜ì.
- ë°”ë¡œ ì§€ìš¸ ë¸Œëœì¹˜ì´ë¯€ë¡œ ì´ë¦„ì€ ì•„ë¬´ë ‡ê²Œë‚˜ ì§€ì–´ë„ ëœë‹¤.
```git
git branch wow
```
![git log](.%5B20210124%5D_reflog_images/359de47f.png)
- ë¸Œëœì¹˜ wowê°€ `1f1b89f` ìœ„ì¹˜ì— ìƒì„±ë˜ì—ˆë‹¤.
- `git branch -a` ëª…ë ¹ì–´ë¡œ ë¸Œëœì¹˜ë¥¼ ë³´ë©´, ì•„ë˜ì™€ ê°™ì´ HEADê°€ ë¶„ë¦¬ëœ ìƒíƒœë¡œ ìˆë‹¤.

![git branch -a](.%5B20210124%5D_reflog_images/44f93b73.png)

- ì›ë˜ì˜ ë¸Œëœì¹˜ì¸ `master`ë¡œ ê°€ì.
```git
git checkout master
```
![git log](.%5B20210124%5D_reflog_images/224de9f7.png)

- `master`ë¥¼ `wow` ë¸Œëœì¹˜ê°€ ìˆëŠ” ìœ„ì¹˜ë¡œ ì˜®ê¸°ê³  ì‹¶ë‹¤.
  - `rebase` ì…ì¥í•˜ì„¸ìš”.
```git
git rebase wow
```
![git log](.%5B20210124%5D_reflog_images/7168e0ae.png)
- #### ğŸ™Š Wow! ì»¤ë°‹ì´ ì‚´ì•„ë‚¬ìŠµë‹ˆë‹¤.
- (ìœ„ì˜ ì‚¬ì§„ì—ì„œ git one ëª…ë ¹ì–´ëŠ” ë¬´ì‹œ. ë‚´ê°€ ë“±ë¡í•œ ë‹¨ì¶• ëª…ë ¹ì–´ë‹¤.)
- `wow` ë¸Œëœì¹˜ëŠ” ì“¸ëª¨ë¥¼ ë‹¤í–ˆìœ¼ë‹ˆ ì§€ìš´ë‹¤.
```git
git branch -d wow
```

## âœŒï¸ update-refë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•
- ë¸Œëœì¹˜ ìƒì„±í•˜ê³  ì‚­ì œí•˜ëŠ” ê²Œ ê·€ì°®ì•„ì„œ ë” ì¢‹ì€ ë°©ë²•ì´ ì—†ì„ê¹Œ ê³ ë¯¼í•˜ë‹¤ê°€ `update-ref`ê°€ ë– ì˜¬ëë‹¤.

![git log](.%5B20210124%5D_reflog_images/b2073936.png)

- `git checkout 1f1b89f`í•œ ìƒí™©ì—ì„œ ì´ì–´ê°„ë‹¤.
- `master` ë¸Œëœì¹˜ê°€ ê°€ì§€ê³  ìˆëŠ” í•´ì‹œê°’ `aa4c159`ë¥¼ `1f1b89f`ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.
```git
git update-ref refs/heads/master 1f1b89f
```
![git log](.%5B20210124%5D_reflog_images/aae40a0b.png)
- `master`ê°€ `1f1b89f`ë¡œ ì´ë™í–ˆë‹¤.
- í•˜ì§€ë§Œ HEADê°€ ì•„ì§ ë¶„ë¦¬ë˜ì–´ ìˆëŠ” ìƒíƒœì´ë‹¤. \
![git branch -a](.%5B20210124%5D_reflog_images/a213eead.png)
- checkout í•´ì¤€ë‹¤.
```git
git checkout master
```
![git log](.%5B20210124%5D_reflog_images/bd6c5f53.png)
- ê¹”ë”í•˜ê²Œ ì›ë³µë˜ì—ˆë‹¤.

---

## +)
- ë‹¤ì‹œ reflogë¥¼ ë³´ì.

![git reflog](.%5B20210124%5D_reflog_images/5c44d53e.png)

- ë°‘ì—ì„œë¶€í„°.
- `aa4c159` `HEAD@{4}: reset: moving to HEAD^^^` ì‹¤ìˆ˜í•œ reset ê¸°ë¡
- `1f1b89f` `(HEAD -> master, wow) HEAD@{3}: checkout: moving from master to 1f1b89f`
  ì›ë³µí•  ì»¤ë°‹ìœ¼ë¡œ checkoutí•œ ê¸°ë¡
- `aa4c159` `HEAD@{2}: checkout: moving from 1f1b89f.. to master`\
  `1f1b89f` `(HEAD -> master, wow) HEAD@{1}: rebase: checkout wow`\
  `1f1b89f` `(HEAD -> master, wow) HEAD@{0}: rebase finished: refs/heads/master onto 1f1b89f9f`
  rebaseí•œ ê¸°ë¡
- #### ì •ë§ì´ì§€ gitì„ ì‚¬ë‘í•˜ì§€ ì•„ë‹ˆí•  ìˆ˜ ì—†ë‹¤.

#### * reflogì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ ê³µì‹ ë¬¸ì„œ ì°¸ê³  : https://git-scm.com/docs/git-reflog
