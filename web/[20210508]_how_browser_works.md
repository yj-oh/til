# 브라우저 기본 구조, 동작 과정
- 로드맵 왼쪽 다리의 5단계에 있는 주제.
- 아래 모든 내용은 [Naver D2 - 브라우저는 어떻게 동작하는가?](https://d2.naver.com/helloworld/59361) 를 참고해서 정리했다.

## 결론
- 브라우저는 렌더링 엔진을 가지고 있다.
  - `파이어폭스` 게코(Gecko) 엔진
  - `크롬`, `사파리` 웹킷(Webkit) 엔진
- 동작 과정을 단순화 하면 `HTML 파싱` → `트리 구축` → `트리 배치` → `그리기`
  - 모든 파싱이 완료될 때까지 기다리지 않고, 각 과정이 점진적으로 이루어진다.

---

# 브라우저의 기본 구조
![](./.%5B20210508%5D_how_browser_works_images/2bdff942.png)

### 사용자 인터페이스
- 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등. 
- 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분.

### 브라우저 엔진
- 사용자 인터페이스와 렌더링 엔진 사이의 동작 제어.

### ⭐️ 렌더링 엔진 
- 요청한 콘텐츠 표시. 
- ex) HTML을 요청하면 HTML/CSS 파싱하여 화면에 표시.

### 통신 
- HTTP 요청과 같은 네트워크 호출에 사용됨. 
- 이것은 플랫폼 독립적인 인터페이스이고 각 플랫폼 하부에서 실행됨.
  
### UI 백엔드 
- 콤보 박스와 창 같은 기본적인 장치를 그림. 
- 플랫폼에서 명시하지 않은 일반적인 인터페이스로서, OS 사용자 인터페이스 체계를 사용.

### 자바스크립트 해석기 
- 자바스크립트 코드를 해석하고 실행.

### 자료 저장소 
- 이 부분은 자료를 저장하는 계층이다. 
- 쿠키를 저장하는 것과 같이 모든 종류의 자원을 하드 디스크에 저장할 필요가 있다. 
- HTML5 명세에는 브라우저가 지원하는 '웹 데이터 베이스'가 정의되어 있다.

# 렌더링 엔진

### 역할
- 요청 받은 내용을 브라우저 화면에 표시
- HTML, XML, 문서, 이미지 등 표시
  
### 브라우저별 렌더링 엔진
- `파이어폭스` 게코(Gecko) 엔진
- `크롬`, `사파리` 웹킷(Webkit) 엔진

### 동작 과정
![](./.%5B20210508%5D_how_browser_works_images/8a2edafb.png)

```text
렌더링 엔진은 HTML 문서를 파싱하고 "콘텐츠 트리" 내부에서 태그를 DOM 노드로 변환한다. 
그 다음 외부 CSS 파일과 함께 포함된 스타일 요소도 파싱한다. 
스타일 정보와 HTML 표시 규칙은 "렌더 트리"라고 부르는 또 다른 트리를 생성한다.

렌더 트리는 색상 또는 면적과 같은 시각적 속성이 있는 사각형을 포함하고 있는데 
정해진 순서대로 화면에 표시된다.

렌더 트리 생성이 끝나면 배치가 시작되는데 이것은 각 노드가 화면의 정확한 위치에 
표시되는 것을 의미한다. 다음은 UI 백엔드에서 렌더 트리의 각 노드를 가로지르며 형상을 
만들어 내는 그리기 과정이다.

일련의 과정들이 ⭐️ 점진적으로 진행된다는 것을 아는 것이 중요하다. 렌더링 엔진은 
좀 더 나은 사용자 경험을 위해 가능하면 빠르게 내용을 표시하는데 모든 HTML을 파싱할 때까지 
기다리지 않고 배치와 그리기 과정을 시작한다. 네트워크로부터 나머지 내용이 전송되기를 
기다리는 동시에 받은 내용의 일부를 먼저 화면에 표시하는 것이다.
```

### 동작 과정 예
![](./.%5B20210508%5D_how_browser_works_images/fa417c97.png)
- ##### HTML 파싱 → 트리 구축 → 트리 배치 → 그리기
