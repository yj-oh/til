# Maven í”„ë¡œì íŠ¸, ë¼ì´ë¸ŒëŸ¬ë¦¬ê¹Œì§€ í¬í•¨í•˜ì—¬ build í•˜ê¸° (feat. uber-JAR)

## ìƒí™©
- ì¼ë°˜ì ì¸ Java í”„ë¡œì íŠ¸ ë¹Œë“œ ë°©ì‹ìœ¼ë¡œ Maven í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí–ˆë‹¤.
- ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ í•´ë‹¹ jar ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ëŠ”ë° NoClassDefFoundError ë°œìƒí–ˆë‹¤.
- Maven dependency ì„¤ì •í•œ í´ë˜ìŠ¤ë¥¼ ì°¾ì§€ ëª»í•œë‹¤.
```text
Exception in thread "main" java.lang.NoClassDefFoundError: org/dcm4che3/io/DicomOutputStream
	at com.yjworld.Main.main(Main.java:8)
Caused by: java.lang.ClassNotFoundException: org.dcm4che3.io.DicomOutputStream
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)
	... 1 more
```

## í•´ê²°
- pom.xml ì— ì•„ë˜ ì„¤ì • ì¶”ê°€í•œ ë’¤ ë‹¤ì‹œ ë¹Œë“œí•œë‹¤.
```xml
<build>
    <plugin>
    	<groupId>org.apache.maven.plugins</groupId>
    	<artifactId>maven-shade-plugin</artifactId>
    	<version>1.6</version>
    	<executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>shade</goal>
                </goals>
            </execution>
    	</executions>
    </plugin>
</build>
```

## ğŸ¤” ì™œ?
- Maven ìœ¼ë¡œ ë¹Œë“œí•  ë•Œ ë‹¤ë¥¸ ì„¤ì • ì—†ì´ ë¹Œë“œí•˜ë©´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ jarê°€ í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ê·¸ë˜ì„œ java.lang.NoClassDefFoundError ë°œìƒ.
- ì‹¤í–‰ì‹œ í¬í•¨í•˜ê³  ìˆëŠ” jar íŒŒì¼ì˜ ê²½ë¡œë¥¼ `--classpath` ì˜µì…˜ì— ëª…ì‹œí•´ì£¼ë©´ ë˜ì§€ë§Œ
  í¬í•¨í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë§ì„ ê²½ìš° ê·¸ ë§ì€ ê²ƒë“¤ì„ ë‹¤ ì ì–´ì¤„ ìˆ˜ëŠ” ì—†ë‹¤.
- uber-JAR ê°œë… ë“±ì¥.

## ğŸ’¡ uber-JAR
- Java í”„ë¡œê·¸ë¨ê³¼ ì¢…ì† ë¼ì´ë¸ŒëŸ¬ë¦¬ê¹Œì§€ í¬í•¨í•˜ëŠ” jar íŒŒì¼.
- ì„¸ ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.
- ìì„¸í•œ ì„¤ëª…ì€ : https://imagej.net/develop/uber-jars

### Unshaded
- Unpack all JAR files, then repack them into a single JAR.
- [Apache Maven Assembly Plugin](https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-assembly-plugin)

### Shaded
- Same as unshaded, but rename (i.e., â€œshadeâ€) all packages of all dependencies.
- [Apache Maven Shade Plugin](https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-shade-plugin)

### JAR of JARs
- The final JAR file contains the other JAR files embedded within.

## ë‹¤ì‹œ ìƒí™©ìœ¼ë¡œ
- ìœ„ì—ì„œ maven-shade-pluginì„ ì‚¬ìš©í–ˆë‹¤.
  - í¬í•¨í•˜ëŠ” jar íŒŒì¼ì„ ë‹¤ í’€ì–´í—¤ì³ì„œ í•˜ë‚˜ì˜ JARë¡œ ë‹¤ì‹œ repack í•œë‹¤.
- í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ì„œ ë¹Œë“œí•˜ë©´ `project.jar`, `original-project.jar` ë‘ ê°œì˜ ê²°ê³¼ë¬¼ì´ ë‚˜ì˜¨ë‹¤.
  - `project.jar` í•´ë‹¹ í”„ë¡œê·¸ë¨ + ì¢…ì† ë¼ì´ë¸ŒëŸ¬ë¦¬ ì „ë¶€ í¬í•¨
  - `original-project.jar` í•´ë‹¹ í”„ë¡œê·¸ë¨ë§Œ í¬í•¨
