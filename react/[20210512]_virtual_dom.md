# 가상돔 (Virtual DOM)
- "가상돔 으아아아아" 하는 오대리 덕분에 가상돔에 대해 이해하고 있는 바를 정리해봄.
- _참고 : [브라우저 기본 구조, 동작 과정](../etc/[20210508]_how_browser_works.md)_
- _오대리가 알려준 유튜브 영상 : [React and the Virtual DOM](https://www.youtube.com/watch?v=BYbgopx44vo)_

## 브라우저 동작 과정
- 브라우저는 렌더링 엔진을 가지고 있다.
    - `파이어폭스` 게코(Gecko) 엔진
    - `크롬`, `사파리` 웹킷(Webkit) 엔진
- 동작 과정을 단순화 하면 `HTML 파싱` → `트리 구축` → `트리 배치` → `그리기`
    - 모든 파싱이 완료될 때까지 기다리지 않고, 각 과정이 점진적으로 이루어진다.
    
## 🤔 문제
- 예전에 각 페이지 마다 HTML 받아서 파싱 → ... → 그리기 할 때는 문제가 없었다.
- SPA(Single page application)가 등장하면서 한 페이지 안에서 무수히 많은 변화가 일어남.
- 그때마다 DOM 트리를 뒤져서 해당 DOM 을 찾아 바꿔주고 다시 트리를 만들고 배치하고 그린다.
- 백 번이면 백 번, 천 번이면 천 번 반복한다.

## 💡 가상돔 (Virtual DOM)
- 그래서 가상돔이라는 개념을 도입했다.
- 실제 DOM에 접근해서 조작하는 것이 아니라 본뜬 가상돔에 적용한다.
> - 변화 발생
> - 가상돔 본뜸
> - 변화 전후 가상돔을 비교하여 차이를 알아냄
> - 바뀐 부분만 최소한의 연산으로 실제 DOM에 적용
> - 최종 그리기
- 결론적으로 실제 DOM에 일어나는 조작과 화면 그리기는 단 한 번.
